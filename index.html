<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Ozgar's Downranking Guide & Tool</title>
		<meta charset="UTF-8"> 
		<meta name="description" content="Downranking Guide and Tool for World of Warcraft:Classic">
		<meta name="keywords" content="WoW, World of Warcraft, Classic WoW, Downranking, Rank down, Tool, Guide">
		<meta name="author" content="Ozgar">
		<meta name="msapplication-TileColor" content="#1d1d1d">
		<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
		<meta name="theme-color" content="#1d1d1d">
		<link rel="stylesheet" type="text/css" href='/wow-downranking/assets/stylesheets/main.css'>
		<link rel="stylesheet" type="text/css" href='/wow-downranking/assets/stylesheets/checkbox.css'>
		<link rel="stylesheet" type="text/css" href='/wow-downranking/assets/stylesheets/spelltooltip.css'>
		<link rel="stylesheet" type="text/css" href='/wow-downranking/assets/stylesheets/talent.css'>
		<link rel="stylesheet" type="text/css" href='/wow-downranking/assets/stylesheets/buff.css'>
		<link rel="stylesheet" type="text/css" href='/wow-downranking/assets/stylesheets/modal.css'>
		<link rel="stylesheet" type="text/css" href='/wow-downranking/assets/stylesheets/rangeslider.css'>
		<link rel="stylesheet" type="text/css" href='/wow-downranking/assets/stylesheets/chart.css'>
		<link rel="stylesheet" type="text/css" href="/wow-downranking/assets/stylesheets/jquery.modal.min.css" />
		<link rel="stylesheet" type="text/css" href="/wow-downranking/assets/stylesheets/cookieconsent.min.css" />
		<link rel="apple-touch-icon" sizes="57x57" href="/wow-downranking/assets/images/favicons/classic/apple-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="/wow-downranking/assets/images/favicons/classic/apple-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="/wow-downranking/assets/images/favicons/classic/apple-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="/wow-downranking/assets/images/favicons/classic/apple-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="/wow-downranking/assets/images/favicons/classic/apple-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="/wow-downranking/assets/images/favicons/classic/apple-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="/wow-downranking/assets/images/favicons/classic/apple-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="/wow-downranking/assets/images/favicons/classic/apple-icon-152x152.png">
		<link rel="apple-touch-icon" sizes="180x180" href="/wow-downranking/assets/images/favicons/classic/apple-icon-180x180.png">
		<link rel="icon" type="image/png" sizes="192x192"  href="/wow-downranking/assets/images/favicons/classic/android-icon-192x192.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/wow-downranking/assets/images/favicons/classic/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="96x96" href="/wow-downranking/assets/images/favicons/classic/favicon-96x96.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/wow-downranking/assets/images/favicons/classic/favicon-16x16.png">
		<script src="/wow-downranking/assets/javascripts/jquery-3.4.1.min.js"></script>
		<script src="/wow-downranking/assets/javascripts/compliance.js"></script>
		<script src="/wow-downranking/assets/javascripts/rangeslider.min.js"></script>
		<script src="/wow-downranking/assets/javascripts/chart.js"></script>
		<script src="/wow-downranking/assets/javascripts/htmlBuilder.js"></script>
		<script src="/wow-downranking/assets/javascripts/utils.js"></script>
		<script src="/wow-downranking/assets/javascripts/calculations.js"></script>
		<script src="/wow-downranking/assets/javascripts/main.js"></script>
		<script src="/wow-downranking/assets/javascripts/chartBuilder.js"></script>
		<script src="/wow-downranking/assets/javascripts/jquery.tablesort.js"></script>
		<script src="/wow-downranking/assets/javascripts/jquery.modal.min.js"></script>
		<script src="/wow-downranking/assets/javascripts/cookieconsent.min.js" data-cfasync="false"></script>
	</head>
	<body id="classic-body">
		<div id="logo-container">
			<img id="main-logo" src="/wow-downranking/assets/images/wow_logo.png" alt="World of Warcraft: Classic"></img>
			<img id="secondary-logo" src="/wow-downranking/assets/images/classic_logo.png" alt="Classic"></img>
		</div>
		<h1 id="main-header">Ozgar's Downranking Guide & Tool</h1>
		<span class="btn">
			<a href="#" onClick="openModal('info-modal')" title="Click to show how downranking works in this tool">How it works!</a>
		</span>

		<div id="character-info-container">
			<div class="character-info">
				<label for="healing">Healing Power</label>
				<span>
					<input id="healing" type="number" min="0" max="10000" value="0" onChange="refreshTooltip();">
				</span>
			</div>
			<div class="character-info">
				<label for="crit-chance">Critical effect chance</label>
				<span>
					<input id="crit-chance" type="number" min="0" max="100" value="0" onChange="refreshTooltip()"><span>%</span>
				</span>
			</div>
		</div>
			</div>
		</div>
		<div class="aq-tome-container">
				<label class="checkbox-container" title="Check this if you want the suggestion to consider AQ20 spell tablets.">Ahn'Qiraj released?
					<input id="aq-tome" type="checkbox" name="tome" checked="true" value="tome" onChange="refreshTooltip()">
					<span class="checkmark-background"></span>
					<span class="checkmark"></span>
				</label>
		</div>
		<div id="class-selection">
			<h4 class="header">Pick a class</h4>
			<div class="navbar">
				<a class="wow-class icon-medium" id="druid" title="Druid" alt="Druid" style="background-image: url(/wow-downranking/assets/images/class_druid.jpg)" onClick="onClassClicked(this);"></a>
				<a class="wow-class icon-medium" id="paladin" title="Paladin" alt="Paladin" style="background-image: url(/wow-downranking/assets/images/class_paladin.jpg)" onClick="onClassClicked(this);"></a>
				<a class="wow-class icon-medium" id="priest" title="Priest" alt="Priest" style="background-image: url(//wow-downranking/assetsimages/class_priest.jpg)" onClick="onClassClicked(this);"></a>
				<a class="wow-class icon-medium" id="shaman" title="Shaman" alt="Shaman" style="background-image: url(/wow-downranking/assets/images/class_shaman.jpg)" onClick="onClassClicked(this);"></a>
			</div>
		</div>	
		<div id="spell-specification-loader" class="loader loader-small hidden"></div>
		<div id="spell-specification-content">
			<div id="talent-selection" class="hidden">
				<h4 class="header">Fill out your talents</h4>
				<div class="navbar"></div>
			</div>
			<div id="buff-selection" class="hidden">
				<h4 class="header">Select active buffs</h4>
				<div class="navbar"></div>
			</div>
			<div id="spell-selection" class="hidden">
				<h4 class="header">Pick a spell</h4>
				<div class="navbar">
				</div>
			</div>
			<div id="result" class="hidden">
				<h4 class="header">Recommended rank with the highest <a href="#" onClick="openModal('info-modal')" title="Click to show how HES is calculated">Healing Efficiency Score</a></h4>
				<div id="tooltip"></div>
			</div>
		</div>
		<div id="tip-container" onclick="newRandomTip()">
			<span id="tip-title">Tip:</span>
			<span id="tip">There is no downranking in Wrath of the Lich King.</span>
		</div>
	</body>
	<div id="info-modal" class="modal">
		<div class="background"></div>
		<div class="content">
			<h1 class="title">How it works!</h1>
			<h3>Introduction</h3>
			<p id="introduction">
				The summer of 2019, right before Classic was coming up I was feeling too exited to play any other game, and since I still had no key to the Beta, I decided to make better use of my time than drooling over Beta videos and streams. The result is a tool that will help players choose the most mana efficient healing spell ranks!</br></br>
			</p>
			<p>
				The rank selection is based on a <i>Healing Efficiency Score</i> (<b class="yellow">HES</b>), which is derived from the combination of <i>Healing per Mana Efficiency</i> (<b class="yellow">HPME</b>) and <i>Healing per Second</i> (<b class="yellow">HpS</b>). A detailed description can be found in the <a href="#calc">calculations section</a></br></br>
			</p>
			<p>
				If you enjoyed the tool please consider donating a cup of coffee!
			</p>
			<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
				<input type="hidden" name="cmd" value="_s-xclick" />
				<input type="hidden" name="hosted_button_id" value="2NHDAHNTTQ3PQ" />
				<input type="image" src="https://www.paypalobjects.com/en_US/SE/i/btn/btn_donateCC_LG.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />
			</form>
			</br>
			<p>If you want a more detailed explanation of how downranking works in Classic Wow, what to think about and how to apply it to your gaming, check out this video made by <a href="https://www.youtube.com/channel/UCGm8RmKIW0EF1RfmNFVr2-Q" target='_blank'>Defcamp & Melderon</a>!</p>
			<iframe class="youtube-iframe" src="" data-src="https://www.youtube-nocookie.com/embed/HBDfRiB1Zlk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
			<h3>Using the tool</h3>
			<ol id="user-guide">
				<li>Fill out your total amount of Healing Power as shown in the in-game character pane</li>
				<li>Fill out your details like crit, haste or if you have the AQ20 tablets (Not relevant for TBC).</li>
				<li>Select your class</li>
				<li>Fill out the talents to match your own talent points</li>
				<li>Apply any of the available buffs</li>
				<li>Select a spell</li>
				<li>A tooltip is now shown, displaying the recommended spell rank.</li>
				<li>Click the button "Spell details" to open the advanced user's window to look at breakpoints and much more!</li>
				<li>A Table will be displayed for you to see the values of each metric for each rank. You can click on the top row of each column to sort by that factor.</li>
				<li>(Optional) Drag the slider to change the importance of <b class="yellow">HpME</b> and <b class="yellow">HpS</b>.. Dragging the slider to the far side of either end, will completely disregard the other attribute. Also, below are two static graphs showing <b class="yellow">HpME</b> and <b class="yellow">HpS</b>. as a function of spell power by rank.</li>
			</ol>
			<h3>Interpreting the results</h3>
			<p>
				The resulting recommended rank is chosen by maximizing <b class="yellow">HES</b> (see next section) for the given <b class="yellow">Healing Power</b>. However, <b class="red">this does NOT mean that this is the only rank you should use</b>, the result only shows what rank will be most efficient, it is still up to you as a player to decide, situationally, when efficiency or healing throughput is most important!</br></br>
				The purpose of the tool is to provide players with enough data to make an informed decision, and understand their full toolset!
			</p>
			<h3 id="calc">Calculations</h3>
			<p id="calc-intro">
				The Spell Coefficient (<b class="yellow">SC</b>) is the factor that your Healing or Spell power is multiplied with in order to determine the final power of the spell. The way the <b class="yellow">SC</b> is calculated depends on the nature of the spell, there are some general rules for how to calculate the SC, but as with all rules there are exceptions and a few spells such as Frost Nova and Lay on Hands, have their own modifiers.</br></br>

				The sections below will describe how this tool calculates Spell Coefficients, should you encounter any errors your are welcome to report a bug, or create a pull request. However, unless a reliable source is provided the requests will be rejected.
			</p>
			<h4>Direct spells and Over-Time spells</h4>
			<p>
				These two are the most straigt forward, since they are comprised of a single dividing factor.</br>

				Direct spells are spells that only have a direct impact such as <i>Holy Light</i> or <i>Healing Touch</i>. The coefficient is calculated by:

				<code>[Direct spell coefficient] = [Cast Time of Spell] / 3.5</code>

				Over-Time spells includes both Damage over time (<b class="yellow">DoTs</b>) and Healing over Time (<b class="yellow">HoTs</b>), such as <i>Rejuvenation</i> or <i>Curse of Agony</i>. The added damage or healing is divided equally among each tick of the spell and the standard formula is:

				<code>[Over-Time spell coefficient] = [Duration of Spell] / 15</code>
			</p>
			<h4>Hybrid spells</h4>
			<p>
				Hybrid spells is a little bit more complicated, these are spells with both a direct effect and a Over-Time portion, such as <i>Regrowth</i>. The standard formula for hybrid spells is:

				<code>
					[Over-Time part] = ([Duration] / 15) / (([Duration] / 15) + ([Cast Time] / 3.5))</br>
					[Direct part] = 1 - [Over-Time portion]
				</code>

				The duration and cast time limitations are then applied:

				<code>
					[Over-Time coefficient] = ([Duration] / 15) * [Over-Time part]</br>
					[Direct coefficient] = ([Cast Time / 3.5) * [Direct part]
				</code>

				<b class="red">DISCLAIMER:</b> Regrowth does not actually follow this standard formula and instead has its own spell specific coefficients as:
				<code>
					[Over-Time coefficient] = 0.497</br>
					[Direct coefficient] = 0.286
				</code>
			</p>
			<h4>Spells below level 20</h4>
			<p>
				Casting a spell that can be learnt below level 20 incurs a significant penalty to the coefficient of the spell. This was introduced during Vanilla WoW in order to counter the unforseen power of heavily downranking spells.

				The formula for this is:

				<code>[Sub Level 20 Coefficient] = 1 - (Maximum(0, 20 - [Required level for the spell]) * 0.0375)</code>
			</p>
			<h4>Critical effect chance</h4>
			<p>
				Critical effect chance is the base percent chance that a spell will become a critical hit, causing <b class="yellow">150%</b> of its normal effect. Direct spell effects are subjectable to critical hits, and over time effects are not.</br></br>

				Since landing critical hits will highly increase your healing throughput, critical chance does have a small effect on the <b class="yellow">HES</b> due to the higher <b class="yellow">HpS</b>. In this tool, critical chance is applied to the direct part of spells, as a static factor:

				<code>
					(1 + (1 + [Critical effect chance]/100)) / 2 = [Crit Coefficient]
				</code>
			</p>

			<h4>Putting it all together</h4>
			<p>
				Now when we have all the parts we can calculate the final effective coefficient for the spell which is defined by:

				<code>[Effective Coefficient] = [Basic Coefficient] * [Sub Level 20 Coefficient]</code>

				Thus the actual power of the spell is:

				<code>[Actual Power] = [Base power] + [+Power] * [Effective Coefficient]</code>

				The result of the function above is what is used when calculating <b class="yellow">HpME</b>, <b class="yellow">HpS</b> and finally <b class="yellow">HES</b>.

				The <b class="yellow">HpME</b> and <b class="yellow">HpS</b> are quite straight forward, and calculated as:
				<code>
					HpME = [Actual Power] / [Mana Cost]</br>
					HpS = [Actual Power] / [Cast time]
				</code>

				From these two we calculate the Healing Efficiency Score <b class="yellow">HES</b> as:

				<code>
					HES = HpME^x * ln(HpS)^y 
				</code>

				with x and y changing depending on the slider.

				A few notes on this process:
				<ul>
					<li>All cast times are considered before any spell haste or casting time talents are applied.</li>
					<li>All talents or buffs that increase the damage or healing from spells are applied after the coefficient calculations.</li>
					<li>All DoT/HoT durations are considered before any duration buffs or talents are applied. Keep in mind that these talents simply add extra ticks of damage or healing for the same amount that the spell would do otherwise.</li>
				</ul>
			</p>
			<h4>Calculation example</h4>
			<p>
				As an example I will demonstrate how to determine the power of <b class="yellow">Rank 3 Healing Wave</b> with <b class="yellow">500 Healing Power</b>, and a <b class="yellow">10% Critical effect chance</b>.

				<code>
					[Base Power] = ([Base min Power] + [Base max Power]) / 2 = (129 + 155) / 2 = 142</br>
					[Basic Coefficient] = [Cast Time] / [Reference Cast Time] = 2.5 / 3.5 = 0.714</br>
					[Sub Level 20 Coefficient] = 1 - ((20 - [Spell level]) * 0.0375) = 1 - ((20 - 12) * 0.0375) = 0.7</br>
					[Effective Coefficient] = [Basic Coefficient] * [Sub Level 20 Coefficient] = 0.5</br>
					[Crit Coefficient] = (1 + (1 + 10/100)) / 2 = 1.05
				</code>
				Which results in the actual power being:
				<code>
					[Actual Power] = ([Base Power] + ([Extra Power] * [Effective Coefficient])) * [Crit Coefficient]</br>
				= (142 + (500 * 0.5)) * 1.05</br>
				= 392 * 1.05 = <i class="yellow">412</i></br>
				</code>
			</p>
			<span class="btn pull-right">
				<a href="#" rel="modal:close">Close</a>
			</span>
		</div>
	</div>
	<div id="details-modal" class="modal">
		<div class="background">
			<div class="loader"></div>
		</div>
		<div class="content">
			<h1 class="title">Detailed Overview</h1>
			<h2 class="content-title"><span class="name blue">Spell</span><span class="text">details</span></h2>
			<div class="experts-notes">
				<h3>Veterans's notes</h3>
				<p class="note"></p>
				<div class="author"> - <span class="name yellow"></span></br>
					<span class="desc"></span>
				</div>
			</div>
			<div class="table-container" id="spell-table"></div>
			<div class="table-container" id="breakpoints"></div>
			<div class="tune-selection">
				<h4 class="header">Slide to change importance of HpME vs HpS</h4>
				<div class="rangeslider-container">
					<input title="Slide to change importance of HpME versus HpS" type="range" min="0" max="10" step="1" value="5" data-orientation="horizontal">
					<span class="hpme-label">HpME</span><span class="hps-label">HpS</span>
				</div>
			</div>
			<div class="chart-container">
				<canvas id="hes-chart" class="chart" width="400" height="400"></canvas>
			</div>
			<div class="chart-container">
				<canvas id="hpme-chart" class="chart" width="400" height="400"></canvas>
			</div>
			<div class="chart-container">
				<canvas id="hps-chart" class="chart" width="400" height="400"></canvas>
			</div>
			<span class="btn pull-right">
				<a href="#" rel="modal:close">Close</a>
			</span>
		</div>
	</div>
	<div id="compare-modal" class="modal">
		<div class="background">
			<div class="loader hidden"></div>
		</div>
		<div class="content">
			<h1 class="title">Compare spells</h1>
			<p>
				Here you can compare the power of two spells. Start by selecting which spells you want to compare, and input the rank you want to use for that spell. You will be presented with a graph of how they perform against eachother in respect to <i class="yellow">Healing</i>, <i class="yellow">Mana cost</i>, <i class="yellow">HpME</i>, <i class="yellow">HpS</i> and <i class="yellow">HES</i>.</br></br>
				NOTE: The values you have selected earlier such as <i class="yellow">Healing Power</i>, <i class="yellow">Talents</i> and tuning of the <i class="yellow">HES Slider</i> within the spell details window, will all be applied.
			</p>
			<div id="compare-container">
				 <div id="col1" class="column">
				 	<div id="first-class" class="compare-class-select">
				 		<div class="navbar">
							<a class="wow-class icon-medium" id="druid1" title="Druid" alt="Druid" data-class-name="druid" style="background-image: url(/images/class_druid.jpg)" onClick="onClassCompareClicked(this)"></a>
							<a class="wow-class icon-medium" id="paladin1" title="Paladin" alt="Paladin" data-class-name="paladin" style="background-image: url(/images/class_paladin.jpg)" onClick="onClassCompareClicked(this)"></a>
							<a class="wow-class icon-medium" id="priest1" title="Priest" alt="Priest" data-class-name="priest" style="background-image: url(/images/class_priest.jpg)" onClick="onClassCompareClicked(this)"></a>
							<a class="wow-class icon-medium" id="shaman1" title="Shaman" alt="Shaman" data-class-name="shaman" style="background-image: url(/images/class_shaman.jpg)" onClick="onClassCompareClicked(this)"></a>
						</div>
					</div>
					<div class="compare-spell-select hidden">
						<div id="first-spell" class="navbar"></div>
					</div>
					<div class="compare-rank-select hidden">
						<label class="yellow" for="first-spell-rank">Rank</label>
						<input id="first-spell-rank" title="Input your desired rank" type="number" min="1" max="11" value="1" onChange="onSpellRankChanged(this)">
					</div>
					<div id="compare-left-result" class="compare-result hidden"></div>
				 </div>
				 <div id="col2outer">
					 <div id="col2mid">
					 	<h4>VS</h4>
					 </div>
					 <div id="col2side" class="column">
					 	<div id="second-class" class="compare-class-select">
					 		<div class="navbar">
								<a class="wow-class icon-medium" id="druid2" title="Druid" alt="Druid" data-class-name="druid" style="background-image: url(/images/class_druid.jpg)" onClick="onClassCompareClicked(this)"></a>
								<a class="wow-class icon-medium" id="paladin2" title="Paladin" alt="Paladin" data-class-name="paladin" style="background-image: url(/images/class_paladin.jpg)" onClick="onClassCompareClicked(this)"></a>
								<a class="wow-class icon-medium" id="priest2" title="Priest" alt="Priest" data-class-name="priest" style="background-image: url(/images/class_priest.jpg)" onClick="onClassCompareClicked(this)"></a>
								<a class="wow-class icon-medium" id="shaman2" title="Shaman" alt="Shaman" data-class-name="shaman" style="background-image: url(/images/class_shaman.jpg)" onClick="onClassCompareClicked(this)"></a>
							</div>
						</div>
						<div class="compare-spell-select hidden">
							<div id="second-spell" class="navbar"></div>
						</div>
						<div class="compare-rank-select hidden">
							<label class="yellow" for="second-spell-rank">Rank</label>
							<input id="second-spell-rank" title="Input your desired rank" type="number" min="1" max="11" value="1" onChange="onSpellRankChanged(this)">
						</div>
						<div id="compare-right-result" class="compare-result hidden"></div>
					 </div>
				 </div>
				<div class="footer">
					<div class="chart-container" style="display: none;">
						<canvas id="radar-chart" class="chart" width="400" height="400"></canvas>
					</div>
				</div>
			</div>
		</div>
	</div>
	<footer>
		<div class="author">
			Creator: Oskar Wiskman </br>
			My <a href="https://github.com/oskarwiskman" target="_blank">GitHub</a> account</br>
			Reddit tag: <a href="https://www.reddit.com/user/Ozgar91" target="_blank">u/Ozgar91</a>
		</div>
		<div class="credits">Credits to:</br>
			<a href="https://www.reddit.com/user/melderon/" target="_blank">u/melderon</a> for collaboration and data verification on Classic WoW Beta Servers</br>
			<a href="https://www.reddit.com/user/slendydaddy/" target="_blank">u/slendydaddy</a> for the amazing high def background</br>
			<a href="https://classic.wowhead.com/" target="_blank">ClassicWowhead</a> for additional spell data</br>
		</div>
		<div class="paypal-container">
			<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
				<input type="hidden" name="cmd" value="_s-xclick" />
				<input type="hidden" name="hosted_button_id" value="2NHDAHNTTQ3PQ" />
				<input type="image" src="https://www.paypalobjects.com/en_US/SE/i/btn/btn_donateCC_LG.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />
			</form>
		</div>
	</footer>
</html>
<!DOCTYPE html>
